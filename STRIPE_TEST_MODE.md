# Stripeテストモード（サンドボックス）設定ガイド

## ✅ テストモードで問題ありません！

開発環境では、**Stripeのテストモード（サンドボックス）**を使用するのが正しいです。

---

## 🔑 テストモードと本番モードの違い

### テストモード（開発環境用）
- APIキーは `sk_test_...` と `pk_test_...` で始まる
- 実際の決済は発生しない
- テストカードで決済をテストできる
- 無料で使用可能

### 本番モード（本番環境用）
- APIキーは `sk_live_...` と `pk_live_...` で始まる
- 実際の決済が発生する
- 本番環境にデプロイする際に切り替える

---

## 📝 現在の設定

`.env.local`ファイルには、テストモード用のプレースホルダーが設定されています：

```env
STRIPE_SECRET_KEY=sk_test_YOUR_SECRET_KEY_HERE
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_YOUR_PUBLISHABLE_KEY_HERE
```

これらをStripeダッシュボードから取得した**テストモードのAPIキー**に置き換えてください。

---

## 🔧 設定手順

### 1. Stripeダッシュボードでテストモードを確認

1. Stripeダッシュボードにログイン
2. 右上の「テストモード」スイッチが**ON**になっていることを確認
3. 「開発者」→「APIキー」を開く
4. **テストモード**のキーをコピー：
   - シークレットキー（`sk_test_...`で始まる）
   - 公開可能キー（`pk_test_...`で始まる）

### 2. `.env.local`ファイルを編集

`creator-collab/.env.local`を開き、実際のテストモードのAPIキーに置き換え：

```env
STRIPE_SECRET_KEY=sk_test_51...（実際のテストモードのシークレットキー）
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51...（実際のテストモードの公開キー）
```

### 3. テスト用の価格を作成

1. Stripeダッシュボードで「テストモード」がONになっていることを確認
2. 「製品」→「価格を追加」
3. 価格タイプ: 定期（サブスクリプション）
4. 価格: ¥200
5. 通貨: JPY
6. 請求期間: 月次
7. 価格ID（`price_...`で始まる）をコピー

### 4. 価格IDを設定

`.env.local`に価格IDを設定：

```env
STRIPE_PRICE_ID_GROW=price_...（実際のテストモードの価格ID）
```

---

## 🧪 テストカード

Stripeテストモードでは、以下のテストカードが使用できます：

### 成功するカード
- **カード番号**: `4242 4242 4242 4242`
- **有効期限**: 任意の未来の日付（例: 12/25）
- **CVC**: 任意の3桁（例: 123）
- **郵便番号**: 任意（例: 12345）

### その他のテストカード
- **3Dセキュア認証**: `4000 0025 0000 3155`
- **決済失敗**: `4000 0000 0000 0002`
- **認証が必要**: `4000 0027 6000 3184`

---

## ✅ 動作確認

1. サーバーを起動: `npm run dev`
2. ブラウザで `http://localhost:3000/pricing` にアクセス
3. Grow Planの「プランを選択」をクリック
4. Stripeの決済画面が表示されることを確認
5. テストカード `4242 4242 4242 4242` で決済をテスト

---

## 🔄 本番環境への移行時

本番環境にデプロイする際は：

1. Stripeダッシュボードで「本番モード」に切り替え
2. 本番モードのAPIキーを取得（`sk_live_...`、`pk_live_...`）
3. 本番環境の`.env.local`（または環境変数）に本番モードのキーを設定
4. 本番環境用の価格を作成
5. 本番環境用のWebhookエンドポイントを設定

---

## 📚 参考

- **Stripeテストモード**: https://stripe.com/docs/testing
- **テストカード一覧**: https://stripe.com/docs/testing#cards
- **詳細セットアップ**: `STRIPE_SETUP.md`

---

**テストモードで開発を進めて、本番環境に移行する際に本番モードに切り替えるのが標準的な流れです！** ✅

